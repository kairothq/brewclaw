# Plan: Batch Counter with Progress Visualization

## Metadata
```yaml
plan_id: 05-03
phase: 5
title: Batch Counter with Progress Visualization
wave: 2
depends_on:
  - 05-01
  - 05-02
files_modified:
  - src/components/batch-counter.tsx
  - src/app/page.tsx
autonomous: true
requirements:
  - BATCH-01
  - BATCH-02
  - BATCH-03
  - BATCH-04
  - BATCH-05
```

## Objective
Create a Batch Counter section showing the number of batches processed with a count-up animation on viewport entry. Includes a progress bar showing batch fill status and status tags. Creates urgency for signups.

## Context
- **Animation Provider**: Motion for count-up animation, GSAP for scroll trigger
- **Design**: Light background section (contrast with dark Skills Store above)
- **Numbers**: Preset/static for v1 (not real-time API)
- **Color Accent**: Espresso (#78350F) for progress bar fill

## Must-Haves (Success Criteria)
- [ ] Light background section
- [ ] Large number with count-up animation on viewport entry
- [ ] Progress bar showing batch fill status
- [ ] Batch status tags (Full vs remaining seats)
- [ ] Preset numbers (not real-time for v1)

## Tasks

<task id="1" type="create">
<title>Create batch-counter.tsx component</title>
<file>src/components/batch-counter.tsx</file>
<instructions>
Create a Batch Counter component with:

1. **Batch Data** (preset/static):
```typescript
const BATCH_DATA = {
  currentBatch: 7,
  totalProcessed: 12847,
  batchCapacity: 500,
  currentFill: 423,
  status: "Filling", // "Filling" | "Full" | "Processing"
}
```

2. **Count-Up Animation Hook**:
Create a custom hook or use Motion's useSpring:
```typescript
function useCountUp(target: number, duration = 2000) {
  const [count, setCount] = useState(0)
  const ref = useRef<HTMLDivElement>(null)
  const inView = useInView(ref, { once: true, margin: "-100px" })

  useEffect(() => {
    if (!inView) return
    // Animate from 0 to target over duration
    // Use requestAnimationFrame or Motion's animate
  }, [inView, target])

  return { count, ref }
}
```

Or use framer-motion's `useSpring` + `useTransform`:
```typescript
const count = useMotionValue(0)
const rounded = useTransform(count, (latest) => Math.round(latest))
// When inView, animate(count, target, { duration: 2 })
```

3. **Progress Bar Component**:
   - Container: h-4 bg-zinc-200 rounded-full overflow-hidden
   - Fill: Motion div with initial width 0, animate to percentage
   - Fill color: bg-[#78350F] (espresso accent)
   - Animate on viewport entry with slight delay after count-up starts

4. **Batch Status Tags**:
   - "Batch 7" pill with espresso background
   - "423/500 seats filled" text
   - Status indicator: "Filling" with animated dot or "Full" with solid indicator

5. **Layout Structure**:
```jsx
<section id="batch-counter" className="py-24 px-6 bg-zinc-100">
  <div className="max-w-4xl mx-auto text-center">
    {/* Header */}
    <p className="text-sm uppercase tracking-wider text-zinc-500 mb-2">
      Batches Processed
    </p>

    {/* Large Count-Up Number */}
    <motion.div className="text-6xl md:text-8xl font-heading font-bold text-zinc-900">
      {roundedCount.toLocaleString()}
    </motion.div>

    {/* Supporting text */}
    <p className="text-zinc-600 mt-4 mb-8">
      AI tasks completed by BrewClaw users
    </p>

    {/* Current Batch Status Card */}
    <div className="bg-white rounded-2xl p-6 shadow-sm border border-zinc-200 max-w-md mx-auto">
      <div className="flex items-center justify-between mb-4">
        <span className="px-3 py-1 bg-[#78350F] text-white rounded-full text-sm font-medium">
          Batch {currentBatch}
        </span>
        <span className="text-zinc-600 text-sm">
          {currentFill}/{batchCapacity} seats
        </span>
      </div>

      {/* Progress Bar */}
      <div className="h-3 bg-zinc-200 rounded-full overflow-hidden">
        <motion.div
          className="h-full bg-[#78350F]"
          initial={{ width: 0 }}
          animate={inView ? { width: `${fillPercentage}%` } : {}}
          transition={{ duration: 1, delay: 0.5, ease: "easeOut" }}
        />
      </div>

      {/* Status */}
      <div className="mt-4 flex items-center justify-center gap-2">
        <span className="w-2 h-2 rounded-full bg-emerald-500 animate-pulse" />
        <span className="text-sm text-zinc-600">{status}</span>
      </div>
    </div>
  </div>
</section>
```

6. **GSAP Scroll Trigger** (optional enhancement):
   - Trigger count-up and progress bar when section enters viewport
   - Can use Motion's useInView instead for simplicity

7. **Urgency Messaging**:
   - Add subtle urgency: "Only {remaining} seats left in current batch"
   - Or: "Join before batch closes"
</instructions>
<verification>
- Component renders with light background
- Large number animates from 0 to target on scroll
- Progress bar fills from 0 to percentage on scroll
- Batch status displays current batch number
- Status tag shows filling/remaining seats
- Animations trigger only once on viewport entry
</verification>
</task>

<task id="2" type="modify">
<title>Replace batch-counter placeholder in page</title>
<file>src/app/page.tsx</file>
<instructions>
1. Import BatchCounter from "@/components/batch-counter"
2. Replace the existing batch-counter placeholder section with the real component
3. Keep the section id="batch-counter" for StatusChip scroll target

Remove this placeholder:
```jsx
<section id="batch-counter" className="min-h-[30vh] flex flex-col items-center justify-center p-12 bg-zinc-900">
  <h2 className="text-2xl font-heading font-bold mb-4">Batch Status</h2>
  <p className="text-muted-foreground text-center max-w-lg">
    Coming in Phase 5
  </p>
</section>
```

Replace with:
```jsx
<BatchCounter />
```

Page order:
- HeroSection
- InstallationSection
- ComparisonSection
- FeaturesSection
- UseCasesMarquee
- SkillsStore
- **BatchCounter** (REPLACED)
- Pricing placeholder
- Footer
</instructions>
<verification>
- Placeholder removed
- BatchCounter component renders
- StatusChip scroll still works (id="batch-counter" preserved)
</verification>
</task>

## Verification Checklist
- [ ] `npm run build` succeeds
- [ ] Batch counter visible on page with light background
- [ ] Large number count-up animation works on scroll
- [ ] Progress bar fills animation works
- [ ] Batch number badge visible
- [ ] Seats remaining text accurate
- [ ] Status indicator animates (pulse for "Filling")
- [ ] StatusChip scroll to batch-counter still works

## Notes
- For v1, numbers are static/preset - no API integration
- Light background creates visual contrast with dark Skills Store above
- Count-up should feel satisfying - use easing, not linear
- Consider adding thousand separators to large number (12,847 not 12847)
- Progress bar percentage = (currentFill / batchCapacity) * 100
